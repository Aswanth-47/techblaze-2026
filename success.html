<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration Successful ‚Äî Tech Blaze 3.0</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      background: #0a0a14;
      font-family: 'DM Sans', sans-serif;
      color: #fff;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 32px 16px 60px;
      position: relative;
      overflow-x: hidden;
    }
    .orb { position: fixed; border-radius: 50%; filter: blur(90px); pointer-events: none; z-index: 0; }
    .orb-1 { width: 420px; height: 420px; background: rgba(124,58,237,0.18); top: -120px; left: -100px; }
    .orb-2 { width: 340px; height: 340px; background: rgba(99,102,241,0.14); bottom: -80px; right: -80px; }
    .orb-3 { width: 260px; height: 260px; background: rgba(16,185,129,0.10); top: 40%; left: 50%; transform: translateX(-50%); }

    .success-card {
      position: relative; z-index: 1;
      width: 100%; max-width: 480px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.09);
      border-radius: 24px;
      padding: 36px 28px 32px;
      backdrop-filter: blur(20px);
      animation: fadeUp .5s ease both;
    }
    @keyframes fadeUp { from { opacity:0; transform:translateY(24px); } to { opacity:1; transform:none; } }

    .success-icon { font-size: 42px; text-align: center; margin-bottom: 12px; }
    .success-title { font-size: 28px; font-weight: 700; text-align: center; margin-bottom: 8px; }
    .success-sub { font-size: 14px; color: rgba(255,255,255,0.55); text-align: center; line-height: 1.6; }
    .success-sub strong { color: rgba(255,255,255,0.8); }

    .success-id {
      margin: 18px 0 0;
      background: rgba(124,58,237,0.15);
      border: 1px solid rgba(124,58,237,0.3);
      border-radius: 10px; padding: 10px 16px;
      font-size: 12px; color: rgba(255,255,255,0.45);
      text-align: center; letter-spacing: 0.06em; text-transform: uppercase;
    }
    .success-id span { display: block; font-size: 18px; font-weight: 700; color: #c4b5fd; letter-spacing: 0.12em; margin-top: 4px; }

    .success-summary {
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 14px; padding: 16px 18px; margin: 18px 0 0;
    }
    .success-summary-title { font-size: 10px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; color: rgba(255,255,255,0.35); margin-bottom: 10px; }
    .summary-row { display: flex; justify-content: space-between; align-items: center; padding: 7px 0; border-bottom: 1px solid rgba(255,255,255,0.06); font-size: 13px; }
    .summary-row:last-child { border-bottom: none; }
    .summary-label { color: rgba(255,255,255,0.4); }
    .summary-value { color: #fff; font-weight: 500; text-align: right; max-width: 60%; word-break: break-word; }

    .divider { display: flex; align-items: center; gap: 10px; margin: 22px 0 0; color: rgba(255,255,255,0.22); font-size: 10px; text-transform: uppercase; letter-spacing: 0.08em; }
    .divider::before, .divider::after { content:''; flex:1; height:1px; background: rgba(255,255,255,0.08); }

    /* Payment gate */
    .payment-gate { margin-top: 14px; border: 1px solid rgba(255,255,255,0.1); border-radius: 18px; overflow: hidden; }
    .pay-steps { display: flex; background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(255,255,255,0.07); }
    .pay-step { flex: 1; padding: 13px 4px; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: rgba(255,255,255,0.25); text-align: center; display: flex; align-items: center; justify-content: center; gap: 6px; transition: color .3s; }
    .pay-step.active { color: #a78bfa; }
    .pay-step.done   { color: #34d399; }
    .pay-step-num { width: 17px; height: 17px; border-radius: 50%; font-size: 9px; display: flex; align-items: center; justify-content: center; border: 1.5px solid currentColor; flex-shrink: 0; }
    .pay-body { padding: 20px 18px; }
    .pay-panel { display: none; }
    .pay-panel.active { display: block; }

    .upi-card { background: linear-gradient(135deg,rgba(167,139,250,0.13),rgba(99,102,241,0.08)); border: 1px solid rgba(167,139,250,0.28); border-radius: 14px; padding: 18px; text-align: center; }
    .upi-label { font-size: 10px; color: rgba(255,255,255,0.38); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 6px; }
    .upi-id { font-size: 17px; font-weight: 700; color: #e2d9ff; font-family: 'Courier New',monospace; background: rgba(255,255,255,0.07); border-radius: 8px; padding: 8px 14px; display: inline-block; margin: 4px 0; }
    .upi-copy-btn { margin-top: 10px; display: inline-flex; align-items: center; gap: 6px; background: rgba(167,139,250,0.18); border: 1px solid rgba(167,139,250,0.35); color: #c4b5fd; font-size: 12px; font-weight: 600; padding: 7px 16px; border-radius: 8px; cursor: pointer; transition: background .2s; font-family: inherit; }
    .upi-copy-btn:hover { background: rgba(167,139,250,0.3); }
    .upi-note { margin-top: 12px; font-size: 12px; color: rgba(255,255,255,0.42); background: rgba(255,255,255,0.04); border-radius: 8px; padding: 9px 12px; line-height: 1.5; }
    .upi-note strong { color: #fbbf24; }
    .upi-apps { display: flex; gap: 7px; justify-content: center; margin-top: 12px; flex-wrap: wrap; }
    .upi-app-chip { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.55); font-size: 11px; padding: 5px 11px; border-radius: 20px; font-weight: 500; }

    .btn-purple { margin-top: 16px; width: 100%; padding: 13px 20px; background: linear-gradient(135deg,#7c3aed,#6366f1); color: #fff; font-size: 14px; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 4px 20px rgba(124,58,237,0.38); transition: transform .15s, box-shadow .2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: inherit; }
    .btn-purple:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(124,58,237,0.52); }

    .upload-zone { border: 2px dashed rgba(167,139,250,0.32); border-radius: 12px; padding: 28px 16px; text-align: center; cursor: pointer; transition: border-color .2s, background .2s; background: rgba(255,255,255,0.02); position: relative; }
    .upload-zone:hover, .upload-zone.dragging { border-color: rgba(167,139,250,0.65); background: rgba(167,139,250,0.05); }
    .upload-zone input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
    .upload-icon { font-size: 34px; margin-bottom: 8px; }
    .upload-title { font-size: 14px; font-weight: 600; color: #e2d9ff; margin-bottom: 3px; }
    .upload-sub { font-size: 12px; color: rgba(255,255,255,0.32); }

    .upload-preview { display: none; margin-top: 12px; background: rgba(52,211,153,0.07); border: 1px solid rgba(52,211,153,0.22); border-radius: 10px; padding: 10px 14px; align-items: center; gap: 10px; }
    .upload-preview.show { display: flex; }
    .preview-img { width: 46px; height: 46px; object-fit: cover; border-radius: 6px; border: 1px solid rgba(255,255,255,0.1); }
    .preview-name { font-size: 12px; font-weight: 600; color: #a7f3d0; }
    .preview-size { font-size: 11px; color: rgba(255,255,255,0.32); margin-top: 2px; }

    .sender-fields { margin-top: 12px; display: flex; flex-direction: column; gap: 10px; }
    .sender-fields input { width: 100%; padding: 11px 14px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.11); border-radius: 10px; color: #fff; font-size: 13px; font-family: inherit; transition: border-color .2s; }
    .sender-fields input:focus { outline: none; border-color: rgba(167,139,250,0.5); background: rgba(167,139,250,0.05); }
    .sender-fields input::placeholder { color: rgba(255,255,255,0.22); }

    .btn-green { margin-top: 14px; width: 100%; padding: 13px 20px; background: linear-gradient(135deg,#059669,#10b981); color: #fff; font-size: 14px; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; box-shadow: 0 4px 20px rgba(16,185,129,0.38); transition: transform .15s, box-shadow .2s, opacity .2s; display: flex; align-items: center; justify-content: center; gap: 8px; font-family: inherit; }
    .btn-green:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(16,185,129,0.52); }
    .btn-green:disabled { opacity: 0.4; cursor: not-allowed; }

    .send-status { margin-top: 9px; font-size: 12px; text-align: center; color: rgba(255,255,255,0.38); min-height: 16px; }
    .send-status.ok  { color: #34d399; }
    .send-status.err { color: #f87171; }

    .unlock-box { background: linear-gradient(135deg,rgba(37,211,102,0.11),rgba(16,185,129,0.07)); border: 1px solid rgba(37,211,102,0.28); border-radius: 14px; padding: 18px; text-align: center; margin-bottom: 14px; }
    .unlock-icon { font-size: 32px; margin-bottom: 6px; }
    .unlock-title { font-size: 15px; font-weight: 700; color: #6ee7b7; margin-bottom: 4px; }
    .unlock-sub { font-size: 12px; color: rgba(255,255,255,0.38); line-height: 1.55; }

    .btn-whatsapp { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 14px 24px; background: #25D366; color: #fff; font-size: 15px; font-weight: 700; border-radius: 12px; text-decoration: none; box-shadow: 0 4px 20px rgba(37,211,102,0.33); transition: background .2s, transform .15s, box-shadow .2s; font-family: inherit; }
    .btn-whatsapp:hover { background: #1ebe5d; transform: translateY(-2px); box-shadow: 0 8px 28px rgba(37,211,102,0.45); }
    .btn-whatsapp svg { width: 20px; height: 20px; flex-shrink: 0; }
    .wa-note { font-size: 11px; color: rgba(255,255,255,0.3); text-align: center; margin-top: 8px; }

    .btn-back { display: flex; align-items: center; justify-content: center; margin-top: 20px; width: 100%; padding: 13px 20px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.7); font-size: 14px; font-weight: 600; border-radius: 12px; text-decoration: none; font-family: inherit; transition: background .2s; }
    .btn-back:hover { background: rgba(255,255,255,0.1); }

    @keyframes spin { to { transform: rotate(360deg); } }
    .spinner { width: 15px; height: 15px; border: 2px solid rgba(255,255,255,0.25); border-top-color: #fff; border-radius: 50%; animation: spin .65s linear infinite; display: inline-block; }
  </style>
</head>
<body>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>

  <div class="success-card">
    <div class="success-icon">‚úÖ</div>
    <h1 class="success-title">You're In!</h1>
    <p class="success-sub">Your team has been successfully registered for <strong>Tech Blaze 3.0</strong>. A confirmation will be shared with the team leader.</p>

    <div class="success-id">Reference ID <span id="refId">‚Äî</span></div>

    <div class="success-summary">
      <div class="success-summary-title">Registration Summary</div>
      <div class="summary-row"><span class="summary-label">Team Name</span><span class="summary-value" id="sumTeam">‚Äî</span></div>
      <div class="summary-row"><span class="summary-label">Team Leader</span><span class="summary-value" id="sumLeader">‚Äî</span></div>
      <div class="summary-row"><span class="summary-label">Leader Email</span><span class="summary-value" id="sumEmail">‚Äî</span></div>
      <div class="summary-row"><span class="summary-label">College</span><span class="summary-value" id="sumCollege">‚Äî</span></div>
      <div class="summary-row"><span class="summary-label">Team Size</span><span class="summary-value" id="sumSize">‚Äî</span></div>
    </div>

    <p class="success-sub" style="font-size:13px;margin-top:14px;">Keep your reference ID handy for check-in. Good luck and see you at the hackathon! üöÄ</p>

    <!-- PAYMENT GATE -->
    <div class="divider">Complete Payment to Join Community</div>

    <div class="payment-gate">
      <div class="pay-steps">
        <div class="pay-step active" id="tab1"><span class="pay-step-num" id="tnum1">1</span> Pay</div>
        <div class="pay-step" id="tab2"><span class="pay-step-num" id="tnum2">2</span> Verify</div>
        <div class="pay-step" id="tab3"><span class="pay-step-num" id="tnum3">3</span> Join</div>
      </div>

      <div class="pay-body">

        <!-- Step 1: UPI Info -->
        <div class="pay-panel active" id="step1">
          <div class="upi-card">
            <div class="upi-label">Pay via UPI to</div>
            <div class="upi-id">aswanthkp2006@oksbi</div>
            <button class="upi-copy-btn" onclick="copyUPI()">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              <span id="copyTxt">Copy UPI ID</span>
            </button>
            <div class="upi-note">Add your <strong>Reference ID</strong> in the payment remarks for quick verification.</div>
            <div class="upi-apps">
              <span class="upi-app-chip">üì± GPay</span>
              <span class="upi-app-chip">üíú PhonePe</span>
              <span class="upi-app-chip">üîµ Paytm</span>
              <span class="upi-app-chip">üü† BHIM</span>
            </div>
          </div>
          <button class="btn-purple" onclick="goStep(2)">
            I've Completed the Payment
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
          </button>
        </div>

        <!-- Step 2: Upload -->
        <div class="pay-panel" id="step2">
          <p style="font-size:13px;color:rgba(255,255,255,0.48);margin-bottom:14px;line-height:1.55;">Upload your payment screenshot and fill in your details. It will be sent to the organiser on WhatsApp for verification.</p>

          <div class="upload-zone" id="uploadZone">
            <input type="file" id="screenshotFile" accept="image/*" onchange="onFileChange(event)">
            <div class="upload-icon">üñºÔ∏è</div>
            <div class="upload-title">Tap to upload screenshot</div>
            <div class="upload-sub">PNG ¬∑ JPG ¬∑ WEBP</div>
          </div>

          <div class="upload-preview" id="uploadPreview">
            <img class="preview-img" id="previewImg" src="" alt="preview">
            <div>
              <div class="preview-name" id="previewName">‚Äî</div>
              <div class="preview-size" id="previewSize">‚Äî</div>
            </div>
          </div>

          <div class="sender-fields">
            <input type="text" id="senderName"  placeholder="Your Full Name" autocomplete="name">
            <input type="tel"  id="senderPhone" placeholder="Your WhatsApp Number (10 digits)" maxlength="10" inputmode="numeric">
          </div>

          <button class="btn-green" id="sendBtn" onclick="sendToWhatsApp()" disabled>
            <svg width="17" height="17" viewBox="0 0 32 32" fill="currentColor"><path d="M16 3C8.82 3 3 8.82 3 16c0 2.38.65 4.63 1.8 6.56L3 29l6.6-1.76A13 13 0 0 0 16 29c7.18 0 13-5.82 13-13S23.18 3 16 3zm5.76 18.66c-.31-.16-1.85-.91-2.13-.99-.28-.1-.49-.16-.7.16-.21.31-.8.99-1 1.2-.18.2-.36.22-.67.07-.31-.16-1.3-.48-2.47-1.53-.91-.81-1.53-1.82-1.71-2.13-.18-.31-.02-.48.14-.64.14-.14.31-.36.47-.54.16-.18.21-.31.31-.52.1-.21.05-.38-.02-.54-.07-.16-.7-1.69-.96-2.31-.25-.6-.51-.52-.7-.53h-.6c-.21 0-.54.08-.83.38-.28.3-1.09 1.06-1.09 2.59s1.12 3.01 1.27 3.21c.16.21 2.2 3.36 5.33 4.71.74.32 1.32.51 1.77.66.74.23 1.42.2 1.95.12.6-.09 1.85-.76 2.1-1.49.26-.73.26-1.36.18-1.49-.07-.13-.28-.21-.59-.37z"/></svg>
            Send Screenshot for Verification
          </button>
          <div class="send-status" id="sendStatus"></div>
        </div>

        <!-- Step 3: Join -->
        <div class="pay-panel" id="step3">
          <div class="unlock-box">
            <div class="unlock-icon">üéâ</div>
            <div class="unlock-title">Screenshot Sent Successfully!</div>
            <div class="unlock-sub">The organiser will verify your payment and confirm your spot. You can join the group now ‚Äî approval is usually quick!</div>
          </div>
          <a href="https://chat.whatsapp.com/L9jO1D027pnCwIfquB1xne" target="_blank" rel="noopener noreferrer" class="btn-whatsapp">
            <svg viewBox="0 0 32 32" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 3C8.82 3 3 8.82 3 16c0 2.38.65 4.63 1.8 6.56L3 29l6.6-1.76A13 13 0 0 0 16 29c7.18 0 13-5.82 13-13S23.18 3 16 3zm5.76 18.66c-.31-.16-1.85-.91-2.13-.99-.28-.1-.49-.16-.7.16-.21.31-.8.99-1 1.2-.18.2-.36.22-.67.07-.31-.16-1.3-.48-2.47-1.53-.91-.81-1.53-1.82-1.71-2.13-.18-.31-.02-.48.14-.64.14-.14.31-.36.47-.54.16-.18.21-.31.31-.52.1-.21.05-.38-.02-.54-.07-.16-.7-1.69-.96-2.31-.25-.6-.51-.52-.7-.53h-.6c-.21 0-.54.08-.83.38-.28.3-1.09 1.06-1.09 2.59s1.12 3.01 1.27 3.21c.16.21 2.2 3.36 5.33 4.71.74.32 1.32.51 1.77.66.74.23 1.42.2 1.95.12.6-.09 1.85-.76 2.1-1.49.26-.73.26-1.36.18-1.49-.07-.13-.28-.21-.59-.37z"/>
            </svg>
            Join WhatsApp Group
          </a>
          <p class="wa-note">Stay updated with announcements, schedules &amp; team coordination</p>
        </div>

      </div>
    </div>
    <!-- END PAYMENT GATE -->

    <a href="index.html" class="btn-back">‚Üê Back to Home</a>
  </div>

  <script>
    /* Load registration data from sessionStorage */
    const raw = sessionStorage.getItem('reg_success');
    if (!raw) {
      // Demo fallback for preview ‚Äî remove this block in production and uncomment the redirect
      // window.location.href = 'register.html';
      document.getElementById('refId').textContent     = 'TB3-2025-0042';
      document.getElementById('sumTeam').textContent   = 'Code Crushers';
      document.getElementById('sumLeader').textContent = 'Aswanth KP';
      document.getElementById('sumEmail').textContent  = 'aswanth@email.com';
      document.getElementById('sumCollege').textContent= 'Demo College of Engineering';
      document.getElementById('sumSize').textContent   = '4 Members';
    } else {
      const reg = JSON.parse(raw);
      sessionStorage.removeItem('reg_success');
      document.getElementById('refId').textContent      = reg.ref_id;
      document.getElementById('sumTeam').textContent    = reg.team;
      document.getElementById('sumLeader').textContent  = reg.leader;
      document.getElementById('sumEmail').textContent   = reg.email;
      document.getElementById('sumCollege').textContent = reg.college;
      document.getElementById('sumSize').textContent    = reg.team_size + ' Member' + (reg.team_size > 1 ? 's' : '');
      if (reg.leader) document.getElementById('senderName').value = reg.leader;
    }

    /* Step navigation */
    function goStep(n) {
      [1, 2, 3].forEach(i => {
        document.getElementById('step' + i).classList.toggle('active', i === n);
        const tab  = document.getElementById('tab' + i);
        const tnum = document.getElementById('tnum' + i);
        tab.className = 'pay-step ' + (i < n ? 'done' : i === n ? 'active' : '');
        tnum.textContent = i < n ? '‚úì' : i;
      });
    }

    /* Copy UPI */
    function copyUPI() {
      navigator.clipboard.writeText('aswanthkp2006@oksbi').then(() => {
        const el = document.getElementById('copyTxt');
        el.textContent = '‚úì Copied!';
        setTimeout(() => el.textContent = 'Copy UPI ID', 2200);
      });
    }

    /* File handling */
    let selectedFile = null;

    function onFileChange(e) {
      const file = e.target.files[0];
      if (!file) return;
      selectedFile = file;
      const reader = new FileReader();
      reader.onload = ev => {
        document.getElementById('previewImg').src         = ev.target.result;
        document.getElementById('previewName').textContent = file.name;
        document.getElementById('previewSize').textContent = (file.size / 1024).toFixed(1) + ' KB';
        document.getElementById('uploadPreview').classList.add('show');
        checkReady();
      };
      reader.readAsDataURL(file);
    }

    const zone = document.getElementById('uploadZone');
    zone.addEventListener('dragover',  e => { e.preventDefault(); zone.classList.add('dragging'); });
    zone.addEventListener('dragleave', () => zone.classList.remove('dragging'));
    zone.addEventListener('drop', e => {
      e.preventDefault(); zone.classList.remove('dragging');
      const f = e.dataTransfer.files[0];
      if (f && f.type.startsWith('image/')) onFileChange({ target: { files: [f] } });
    });

    ['senderName', 'senderPhone'].forEach(id =>
      document.getElementById(id).addEventListener('input', checkReady)
    );

    function checkReady() {
      const name  = document.getElementById('senderName').value.trim();
      const phone = document.getElementById('senderPhone').value.trim();
      document.getElementById('sendBtn').disabled =
        !(selectedFile && name && /^\d{10}$/.test(phone));
    }

    /* Send to WhatsApp */
    function sendToWhatsApp() {
      const name    = document.getElementById('senderName').value.trim();
      const phone   = document.getElementById('senderPhone').value.trim();
      const refId   = document.getElementById('refId').textContent;
      const team    = document.getElementById('sumTeam').textContent;
      const leader  = document.getElementById('sumLeader').textContent;
      const college = document.getElementById('sumCollege').textContent;

      const btn    = document.getElementById('sendBtn');
      const status = document.getElementById('sendStatus');

      btn.disabled = true;
      btn.innerHTML = '<span class="spinner"></span> Opening WhatsApp‚Ä¶';

      const msg = encodeURIComponent(
`üéüÔ∏è *Tech Blaze 3.0 ‚Äî Payment Screenshot*
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üë§ Name        : ${name}
üì± Phone       : ${phone}
üè∑Ô∏è Ref ID      : ${refId}
üèÜ Team        : ${team}
üëë Team Leader : ${leader}
üè´ College     : ${college}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìé Screenshot attached below ‚¨áÔ∏è`
      );

      const reader = new FileReader();
      reader.onload = ev => {
        /* Open screenshot in new tab for participant to save & attach */
        const imgWin = window.open('', '_blank');
        if (imgWin) {
          imgWin.document.write(`
            <html><head><title>Payment Screenshot ‚Äî Tech Blaze 3.0</title></head>
            <body style="margin:0;background:#0a0a14;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;font-family:sans-serif;gap:16px;padding:20px;">
              <div style="background:rgba(167,139,250,0.15);border:1px solid rgba(167,139,250,0.3);border-radius:12px;padding:12px 20px;color:#c4b5fd;font-size:13px;text-align:center;max-width:360px;">
                üìå <strong>Save this image</strong> and attach it in the WhatsApp chat that opens next.
              </div>
              <img src="${ev.target.result}" style="max-width:100%;max-height:75vh;border-radius:10px;box-shadow:0 8px 40px rgba(0,0,0,0.5);" alt="Payment Screenshot">
            </body></html>`);
          imgWin.document.close();
        }

        /* Open WhatsApp */
        setTimeout(() => window.open(`https://wa.me/919497082155?text=${msg}`, '_blank'), 600);

        status.className   = 'send-status ok';
        status.textContent = '‚úì WhatsApp opened! Attach the screenshot from the other tab.';
        btn.innerHTML      = '‚úì Done ‚Äî proceed below';
        btn.style.background = 'linear-gradient(135deg,#065f46,#047857)';

        setTimeout(() => goStep(3), 2000);
      };
      reader.readAsDataURL(selectedFile);
    }

    goStep(1);
  </script>
</body>
</html>
